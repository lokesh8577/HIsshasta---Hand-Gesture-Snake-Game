<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game History</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
    <style>

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
        }

        .snake-history-container {
           width: 100;
            margin: 0 70px;
            padding-top: 70px;

        }

        .snake-history-header {
            background: var(--bg-color);
            color: var(--primary-color);
            padding: 25px 0;
            text-align: center;
            margin-bottom: 30px;
            box-shadow: var(--shadow);
            position: relative;
            overflow: hidden;
        }

        .snake-history-header::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--bg-color);
        }

        .snake-history-title {
            margin: 0;
            font-size: 2.5rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            color: var(--accent-color);
        }

        .snake-history-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            flex-wrap: wrap;
            gap: 15px;
            background-color: var(--bg-color);
            padding: 15px;
            border-radius: 8px;
            border: 1px solid var(--border-color);
        }

        .snake-filter-group {
            display: flex;
            gap: 15px;
            align-items: center;
            flex-wrap: wrap;
        }

        .snake-history-select, 
        .snake-history-input {
            padding: 10px 15px;
            background-color: var(--bg-color);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            font-size: 14px;
            color: var(--text-color);
            transition: var(--transition);
        }

        .snake-history-select:focus, 
        .snake-history-input:focus {
            outline: none;
            border-color: var(--border-color);
            box-shadow: 0 0 0 2px var(--shadow);
        }
        .snake-btn-group{
            display: flex;
            gap: 15px;
            align-items: center;
            flex-wrap: wrap;
            
        }

        .snake-history-btn {
            padding: 10px 18px;
            background-color: var(--hover);
            color: var(--primary-color);
            border: none;
            border-radius: 6px;
            font-weight: 500;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
        }

        .snake-history-btn:hover {
            background-color: var(--accent-color);
            transform: translateY(-2px);
        }

        .snake-history-btn:active {
            transform: translateY(0);
        }

        .snake-history-btn-secondary {
            background-color: var(--hover);
            border: 1px solid var(--border-color);
        }

        .snake-history-btn-secondary:hover {
            background-color: var(--accent-color);
        }

        .snake-history-btn-danger {
            background-color: var(--hover);
        }

        .snake-history-btn-danger:hover {
            background-color: var(--accent-color);
        }

        .snake-stats-container {
            background-color: var(--bg-color);
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: var(--shadow);
            border: 1px solid var(--border-color);
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }

        .snake-stat-card {
            text-align: center;
            padding: 15px;
            background-color: var(--bg-color);
            border-radius: 8px;
            transition: var(--transition);
        }

        .snake-stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px var(--shadow);
        }

        .snake-stat-value {
            font-size: 2.2rem;
            font-weight: 700;
            margin: 10px 0;
            color: var(--primary-color);
        }

        .snake-stat-label {
            color: var(--tertiary-color);
            font-size: 0.95rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .snake-table-container {
            background-color: var(--bg-color);
            border-radius: 10px;
            border: 1px solid var(--border-color);
            overflow: hidden;
            box-shadow: var(--shadow);
            margin-bottom: 30px;
            
        }

        .snake-history-table {
            width: 100%;
            border-collapse: collapse;
            margin-left: 10%;
        }

        .snake-table-header {
            background-color: var(--bg-color);
            color: var(--text-color);
            font-weight: 600;
            padding: 15px;
            text-align: left;
            position: sticky;
            top: 0;
        }

        .snake-table-data {
            padding: 12px 15px;
        }

        .snake-table-row:last-child .snake-table-data {
            border-bottom: none;
        }

        .snake-table-row:hover .snake-table-data {
            background-color: var(--bg-color);
        }

        .snake-mode-icon {
            font-size: 1.2rem;
            margin-right: 8px;
        }

        .snake-keyboard-mode {
            color: var(--primary-color);
        }

        .snake-gesture-mode {
            color: var(--tertiary-color);
        }

        .snake-score-cell {
            font-weight: 600;
        }

        .snake-high-score {
            color: var(--primary-color);
        }

        .snake-low-score {
            color: var(--tertiary-color);
        }

        .snake-date-cell {
            color: var(--primary-color);
            font-size: 0.9rem;
        }

        .snake-no-history {
            text-align: center;
            padding: 50px;
            color: var(--tertiary-color);
        }

        .snake-no-history-icon {
            font-size: 2rem;
            margin-bottom: 15px;
            color: var(--primary-color);
        }

        .snake-loading {
            text-align: center;
            padding: 30px;
            color: var(--tertiary-color);
        }

        .snake-loading-icon {
            font-size: 1.5rem;
            animation: snake-spin 1s linear infinite;
            margin-bottom: 15px;
        }

        @keyframes snake-spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Tablet Responsive (768px - 1024px) */
@media (max-width: 1024px) {
    .snake-history-container {
        margin-top: 60px;
        padding-top: 60px;
    }

    .snake-history-title {
        font-size: 2.2rem;
        flex-direction: column;
        gap: 8px;
        text-align: center;
    }

    .snake-history-controls {
        flex-direction: column;
        gap: 15px;
        padding: 20px;
        border-radius: 12px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.08);
    }

    .snake-filter-group {
        width: 100%;
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 12px;
    }

    .snake-btn-group {
        width: 100%;
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 12px;
    }

    .snake-history-select, 
    .snake-history-input {
        width: 100%;
        padding: 12px 15px;
        font-size: 15px;
        border-radius: 8px;
        box-shadow: inset 0 1px 3px rgba(0,0,0,0.1);
    }

    .snake-history-btn {
        width: 100%;
        justify-content: center;
        padding: 12px;
        font-size: 15px;
        border-radius: 8px;
    }

    .snake-stats-container {
        grid-template-columns: repeat(2, 1fr);
        gap: 15px;
        padding: 20px;
        border-radius: 12px;
    }

    .snake-stat-card {
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0 3px 10px rgba(0,0,0,0.08);
    }

    .snake-stat-value {
        font-size: 2.2rem;
    }

    .snake-table-container {
        border-radius: 12px;
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
    }

    .snake-history-table {
        margin-left: 0;
        min-width: 600px;
    }

    .snake-table-header {
        padding: 16px 12px;
        font-size: 15px;
        position: sticky;
        left: 0;
    }

    .snake-table-data {
        padding: 14px 12px;
        font-size: 14px;
    }

    .snake-table-row:hover .snake-table-data {
        background-color: transparent;
    }
}

/* Mobile Responsive (480px - 767px) */
@media (max-width: 767px) {
    .snake-history-container {
                margin-top: 60px;

        padding-top: 40px;
    }

    .snake-history-title {
        font-size: 1.9rem;
        margin-bottom: 20px;
    }

    .snake-history-controls {
        padding: 16px;
        border-radius: 10px;
    }

    .snake-filter-group {
        grid-template-columns: 1fr;
        gap: 10px;
    }

    .snake-btn-group {
        grid-template-columns: 1fr;
        gap: 10px;
    }

    .snake-history-select, 
    .snake-history-input {
        padding: 10px 14px;
        font-size: 14px;
    }

    .snake-history-btn {
        padding: 10px;
        font-size: 14px;
    }

    .snake-stats-container {
        grid-template-columns: 1fr;
        padding: 16px;
    }

    .snake-stat-card {
        padding: 16px;
        display: flex;
        flex-direction: column;
        align-items: center;
    }

    .snake-stat-value {
        font-size: 2rem;
    }

    .snake-stat-label {
        font-size: 0.9rem;
    }

    .snake-table-header {
        padding: 14px 10px;
        font-size: 14px;
    }

    .snake-table-data {
        padding: 12px 10px;
        font-size: 13px;
    }

    .snake-no-history, 
    .snake-loading {
        padding: 40px 20px;
    }

    .snake-no-history-icon {
        font-size: 1.8rem;
    }
}

/* Small Mobile (up to 479px) */
@media (max-width: 479px) {
    .snake-history-container {
        margin: 0 15px;
                margin-top: 60px;

        padding-top: 30px;
    }

    .snake-history-title {
        font-size: 1.7rem;
        gap: 6px;
    }

    .snake-history-title i {
        font-size: 1.5rem;
    }

    .snake-history-controls {
        padding: 14px;
        border-radius: 8px;
    }

    .snake-history-select, 
    .snake-history-input {
        padding: 9px 12px;
        font-size: 13px;
    }

    .snake-history-btn {
        padding: 9px;
        font-size: 13px;
    }

    .snake-stat-card {
        padding: 14px;
    }

    .snake-stat-value {
        font-size: 1.8rem;
    }

    .snake-table-header {
        padding: 12px 8px;
        font-size: 13px;
    }

    .snake-table-data {
        padding: 10px 8px;
        font-size: 12px;
    }

    /* Touch optimizations */
    .snake-history-btn {
        min-height: 44px; /* Minimum touch target size */
    }

    .snake-table-row {
        transition: transform 0.2s ease;
    }

    .snake-table-row:active {
        transform: scale(0.98);
    }

    /* Better scroll for tables */
    .snake-table-container {
        -webkit-overflow-scrolling: touch;
        scrollbar-width: none;
    }

    .snake-table-container::-webkit-scrollbar {
        display: none;
    }
}

/* Animation Enhancements */
@media (max-width: 1024px) {
    .snake-stat-card {
        transition: all 0.3s ease;
    }

    .snake-stat-card:hover {
        transform: translateY(-3px);
        box-shadow: 0 6px 12px rgba(0,0,0,0.1);
    }

    .snake-history-btn {
        transition: all 0.2s ease;
    }

    .snake-history-btn:active {
        transform: scale(0.96);
    }
}

/* Dark mode adjustments for mobile */
@media (max-width: 1024px) {
    .snake-history-controls,
    .snake-stat-card,
    .snake-table-container {
        background-color: var(--card-bg-color);
        border: 1px solid var(--card-border-color);
    }

    .snake-history-select, 
    .snake-history-input {
        background-color: var(--input-bg-color);
        color: var(--text-color);
        border-color: var(--input-border-color);
    }

    .snake-table-header {
        background-color: var(--table-header-bg);
    }
}
    </style>
</head>
<body>
  <header class="main-header">
            <div class="header-container">
                <div class="logo-section">
                    <a class="header-logo" href="/">
                       <div class="logo-icon">
    <svg width="80px" height="80px" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="iconify iconify--fxemoji" preserveAspectRatio="xMidYMid meet">
        <path fill="var(--text-color)" d="M50.816 119.114v16.199s-13.707-.831-13.707-16.199h13.707zm6.326 0c0 15.368 13.707 16.199 13.707 16.199v-16.199H57.142z"></path>
        <path fill="var(--accent-color)" d="M78.389 142.269c-6.637-6.636-26.715-5.761-45.657 13.18a78.26 78.26 0 0 1-4.609 4.265a3.909 3.909 0 0 0-1.453.761c-.503.419-.819.423-1.097.39c-1.906-.221-4.706-2.768-8.321-7.569a33.585 33.585 0 0 0-.821-1.063a3.953 3.953 0 1 0-6.088 5.046c.141.17.339.438.592.773c2.251 2.989 4.808 6.045 7.701 8.13c-6.046 2.994-9.315 2.228-9.369 2.215c.093.024.14.044.14.044l-2.585 7.474c.369.127 1.618.498 3.666.498c4.974 0 14.653-2.189 27.835-15.371c16.398-16.4 31.993-15.661 34.474-13.18a3.954 3.954 0 1 0 5.592-5.593z"></path>
        <path fill="var(--tertiary-color)" d="M492.435 364.927c-1.25-9.271-3.099-17.283-5.131-24.065c-2.012-6.786-4.055-12.379-5.879-16.824c-1.832-4.442-3.344-7.771-4.4-9.995l-1.63-3.352c-1.891-3.893-6.293-6.095-10.676-5.044c-5.062 1.214-8.181 6.302-6.967 11.364l.067.278l.797 3.32c.521 2.185 1.265 5.43 2.067 9.661c.797 4.229 1.692 9.436 2.285 15.533c.304 3.047.524 6.311.698 9.764c.129 3.456.157 7.106.002 10.918c-.334 7.615-1.314 15.893-3.548 24.322c-2.256 8.4-5.806 16.964-10.991 24.595c-2.595 3.804-5.569 7.38-8.931 10.464c-3.352 3.083-7.066 5.701-10.907 7.564c-3.829 1.882-7.806 2.934-11.33 3.113c-.443.037-.874.025-1.302.031c-.216.013-.422-.019-.632-.021c-.181-.014-.492 0-.516-.038a1.296 1.296 0 0 0-.245-.053l-1.166-.078l-.662-.044c-.255-.008.866-.001.333-.019l-.139-.029l-.553-.105a21.437 21.437 0 0 1-2.179-.63a24.396 24.396 0 0 1-2.143-.926c-2.837-1.407-5.663-3.69-8.131-6.836c-2.464-3.135-4.578-7.075-5.956-11.585c-1.39-4.501-2.109-9.527-2.073-14.828c.035-2.656.254-5.378.667-8.146a80.042 80.042 0 0 1 1.819-8.432c1.546-5.698 3.965-11.467 6.989-17.233a107.814 107.814 0 0 1 2.4-4.318c.425-.695.873-1.481 1.273-2.106l1.238-1.942l1.597-2.427l2.022-3.167c1.325-2.138 2.653-4.288 3.913-6.505c5.068-8.838 9.654-18.289 13.419-28.42c3.772-10.122 6.692-20.942 8.312-32.356c1.601-11.411 1.926-23.428.304-35.697c-1.63-12.245-5.191-24.746-11.347-36.652c-6.142-11.868-14.918-23.224-26.931-32.188c-5.992-4.465-12.795-8.3-20.295-11.069c-7.485-2.773-15.682-4.445-24.041-4.652c-8.353-.226-16.816 1.042-24.636 3.587c-7.83 2.535-15.015 6.278-21.239 10.679c-6.242 4.401-11.615 9.407-16.21 14.636c-4.621 5.233-8.474 10.693-11.834 16.201c-6.66 11.038-11.273 22.249-14.799 33.315c-3.514 11.079-5.91 22.051-7.648 32.89c-1.741 10.843-2.761 21.546-3.359 32.135c-.276 5.288-.484 10.56-.541 15.787c-.05 2.57-.04 5.439-.043 7.998l.032 3.614l.01 3.4c-.03 7.901-.737 15.503-2.112 22.565c-1.398 7.043-3.486 13.535-6.212 19.094c-2.721 5.562-6.034 10.188-9.647 13.669c-3.614 3.474-7.506 5.808-11.236 7.045c-3.733 1.247-7.267 1.388-10.16.786c-2.92-.61-5.158-1.863-7.071-3.716c-1.907-1.854-3.651-4.497-4.895-8.383c-1.251-3.846-1.908-8.835-1.729-14.423c.151-5.583 1.127-11.732 2.715-17.993a124.903 124.903 0 0 1 2.847-9.486c.545-1.59 1.127-3.181 1.728-4.771l.932-2.385l.878-2.136l2.383-5.533l2.597-6.16a467.92 467.92 0 0 0 4.859-12.25a488.85 488.85 0 0 0 8.494-24.225c5.146-16.027 9.338-31.799 12.549-47.301c3.183-15.506 5.417-30.729 6.516-45.672c1.09-14.941 1.067-29.61-.531-43.981c-1.608-14.346-4.816-28.483-10.44-41.781c-2.808-6.634-6.226-13.029-10.24-18.94c-4.005-5.912-8.606-11.318-13.529-15.986c-4.911-4.688-10.159-8.586-15.307-11.759a96.167 96.167 0 0 0-14.976-7.466c-9.056-3.558-16.813-5.187-23.03-6.167c-8.695-3.326-18.32-5.257-28.478-5.411c-39.33-.594-100.302 25.207-105.198 57.739a13.21 13.21 0 0 0-.108.973c-.741 9.696 7.341 17.818 17.065 17.746l40.555-.3c3.586-.027 5.18 4.489 2.374 6.721c-11.517 9.161-29.362 24.328-21.267 24.328c18.271 0 52.545-.13 64.971-.081c16.665.066 32.016-2.443 44.226-7.835c1.399 4.583 2.543 10.014 3.245 16.17c1.051 9.052 1.198 19.563.397 30.983c-.794 11.426-2.527 23.772-5.132 36.683c-2.583 12.916-6.019 26.421-10.321 40.2a418.21 418.21 0 0 1-7.102 20.823a398.928 398.928 0 0 1-4.047 10.464l-2.149 5.223l-2.466 5.9l-1.453 3.654l-1.305 3.465a232.471 232.471 0 0 0-2.469 7.096a193.745 193.745 0 0 0-4.258 14.911c-2.459 10.29-4.208 21.293-4.395 33.165c-.177 11.83 1.188 24.629 5.623 37.685c2.221 6.506 5.212 13.044 9.154 19.289c3.927 6.24 8.782 12.182 14.491 17.386a81.95 81.95 0 0 0 19.262 13.092c7.026 3.438 14.537 5.825 22.146 7.137c15.247 2.65 30.782.915 44.604-4.119c13.87-5.015 26.026-13.259 35.77-23.082c9.757-9.849 17.175-21.197 22.523-32.858c5.363-11.684 8.743-23.666 10.807-35.461c2.025-11.803 2.755-23.453 2.557-34.807l-.147-7.437c-.015-2.26-.049-4.213-.029-6.465c-.001-4.42.133-8.798.312-13.156c.4-8.699 1.14-17.278 2.383-25.541c1.231-8.262 2.928-16.242 5.181-23.604c2.239-7.356 5.064-14.098 8.309-19.596c3.228-5.488 6.9-9.622 10.057-11.876c1.577-1.162 2.995-1.851 4.242-2.292c1.255-.431 2.354-.609 3.515-.612c1.157.003 2.402.197 3.811.685c1.403.486 2.954 1.28 4.539 2.424c3.181 2.271 6.404 5.974 8.876 10.617c2.497 4.639 4.275 10.184 5.145 16.163c.468 2.982.669 6.096.711 9.26a80.513 80.513 0 0 1-.58 9.689c-.826 6.552-2.426 13.232-4.681 19.86c-2.264 6.627-5.212 13.187-8.66 19.572a182.042 182.042 0 0 1-2.654 4.771l-3.189 5.454l-2.027 3.633c-.677 1.236-1.235 2.348-1.852 3.527a164.769 164.769 0 0 0-3.41 7.115c-4.322 9.615-7.6 19.815-9.622 30.35a114.77 114.77 0 0 0-1.658 32.239a106.577 106.577 0 0 0 2.732 16.072c1.371 5.281 3.132 10.463 5.382 15.459c4.461 9.983 10.695 19.288 18.741 26.992c8.005 7.698 17.844 13.826 28.719 17.187a65.654 65.654 0 0 0 16.683 2.856l2.1.04l1.519.012l.662-.035l1.477-.077l2.389-.152c.853-.054 1.414-.141 2.106-.218c.661-.085 1.329-.150 1.977-.263c1.304-.206 2.601-.421 3.865-.7c10.18-2.129 18.958-6.377 26.371-11.405c7.44-5.043 13.537-10.974 18.558-17.185a96.612 96.612 0 0 0 12.11-19.215c6.265-13.01 9.154-25.88 10.355-37.538a132.802 132.802 0 0 0-.557-31.521z"></path>
        <path fill="var(--border-color)" d="M118.602 70.08c6.423 0 11.63 5.207 11.63 11.63v14.296c0 6.423-5.207 11.63-11.63 11.63c-6.423 0-11.63-5.207-11.63-11.63V81.71c0-6.423 5.207-11.63 11.63-11.63z"></path>
        <circle fill="var(--border-color)" cx="43.962" cy="106.054" r="3.427"></circle>
    </svg>
</div>
                        <h1 class="logo-text">
                            HissHasta
                        </h1>
                    </a>

                    <div class="logo-adjacent-icons">
                        <a class="settings-link" href="/setting">
                            <i class="fas fa-cog"></i>
                        </a>
                        <a class="theme-link" href="/theme">
                            <i class="fa-solid fa-palette"></i>
                        </a>
                    </div>
                </div>

                <nav class="header-nav">
               
                    <div class="nav-links">
                        <a class="nav-link" href="/leaderboard">
                            <div class="nav-icon">
                                <i class="fa-solid fa-crown"></i>
                            </div>
                            <span class="nav-tooltip">Leaderboard</span>
                        </a>
                        <a class="nav-link" href="/history">
                            <div class="nav-icon">
                                <i class="fa-solid fa-clock-rotate-left"></i>
                            </div>
                            <span class="nav-tooltip">History</span>
                        </a>
                        <a class="nav-link" href="#">
                            <div class="nav-icon">
                                <i class="fa-solid fa-gamepad"></i>
                            </div>
                            <span class="nav-tooltip">Mode</span>
                        </a>
                        <div class="nav-actions">
                       <button class="notification-btn">
    <div class="notification-icon">
        <i class="fas fa-bell"></i>
    </div>
</button>
                    </div>
                        <div class="profile-container">
                            {% if 'user' in session %}
                            <!-- Logged in state -->
                            <div class="profile-btn" id="profileBtn">
                                <i class="fas fa-user"></i>
                                <span class="username" style="cursor: default;">{{ session['user']['username'] }}</span>
                            </div>
                            <div class="profile-window hidden" id="profileWindow">
                                <div class="profile-content">
                                    {% if 'user' in session %}
                                    <p>Welcome, {{ session['user']['username'] }}!</p>
                                    <p>Email: {{ session['user']['email'] }}</p>
                                    {% endif %}
                                    <button class="logout-btn" id="logoutBtn">
                                        <i class="fas fa-sign-out-alt"></i> Logout
                                    </button>
                                </div>
                            </div>
                            {% else %}
                            <!-- Logged out state -->
                            <a href="{{ url_for('login') }}" class="profile-btn" id="profileLink" style="cursor: default;margin-top: 5px;">
                                <i class="fas fa-user"></i>
                            </a>
                            {% endif %}
                        </div>
                    </div>

                    
                </nav>

                <button class="mobile-menu-btn" aria-label="Toggle menu">
                    <i class="fas fa-bars menu-icon"></i>
                </button>
            </div>
        </header>
    <div class="snake-history-container">
        <h1 class="snake-history-title"><i class="fas fa-clock-rotate-left"></i> Game History</h1>
        <div class="snake-history-controls">
            <div class="snake-filter-group">
                <select class="snake-history-select" id="snake-mode-filter">
                    <option value="all">All Modes</option>
                    <option value="keyboard">Keyboard</option>
                    <option value="gesture">Gesture</option>
                </select>
                
                <select class="snake-history-select" id="snake-time-filter">
                    <option value="all">All Time</option>
                    <option value="today">Today</option>
                    <option value="week">This Week</option>
                    <option value="month">This Month</option>
                </select>
                
                <input type="text" class="snake-history-input" id="snake-search-input" placeholder="Search games...">
            </div>
            
            <div class="snake-btn-group">
                <button class="snake-history-btn" id="snake-refresh-btn"><i class="fas fa-sync-alt"></i> Refresh</button>
                <button class="snake-history-btn snake-history-btn-danger" id="snake-clear-btn"><i class="fas fa-trash"></i> Clear</button>
            </div>
        </div>
        
        <div class="snake-stats-container">
            <div class="snake-stat-card">
                <div class="snake-stat-value" id="snake-total-games">0</div>
                <div class="snake-stat-label">Total Games</div>
            </div>
            <div class="snake-stat-card">
                <div class="snake-stat-value" id="snake-highest-score">0</div>
                <div class="snake-stat-label">Highest Score</div>
            </div>
            <div class="snake-stat-card">
                <div class="snake-stat-value" id="snake-average-score">0</div>
                <div class="snake-stat-label">Average Score</div>
            </div>
            <!-- <div class="snake-stat-card">
                <div class="snake-stat-value" id="snake-win-rate">0%</div>
                <div class="snake-stat-label">Win Rate</div>
            </div> -->
        </div>
        
        <div class="snake-table-container">
            <table class="snake-history-table">
                <thead>
                    <tr>
                        <th class="snake-table-header">S No.</th>
                        <th class="snake-table-header">Score</th>
                        <th class="snake-table-header">Date & Time</th>
                        <th class="snake-table-header">Mode</th>
                    </tr>
                </thead>
                <tbody id="snake-history-body">
                    <tr class="snake-table-row">
                        <td colspan="4" class="snake-loading">
                            <i class="fas fa-spinner snake-loading-icon"></i><br>
                            Loading game history...
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
  <footer>

            <div class="leftright">
                <div class="left">
                    <a class="textButton" id="contactPopupButton" href="/contact">
                        <i class="fas fa-fw fa-envelope"></i>
                        <div class="text">Contact</div>
                    </a>
                    <a id="supportMeButton" class="textButton" href="/feedback">
                        <i class="fa-solid fa-comment"></i>
                        <div class="text">Feedback</div>
                    </a>
                    <a href="https://github.com/lokesh8577" class="textButton" target="_blank"
                        rel="noreferrer noopener">
                        <i class="fas fa-fw fa-code"></i>
                        <div class="text">Github</div>
                    </a>
                    <a href="https://www.linkedin.com/in/lokesh-prajapat-354756279/" class="textButton" target="_blank"
                        rel="noreferrer noopener">
                        <i class="fa-brands fa-linkedin"></i>
                        <div class="text">Linkedin</div>
                    </a>
                    <a href="https://x.com/Lokesh85772" class="textButton" target="_blank" rel="noreferrer noopener">
                       <i class="fa-brands fa-twitter"></i>
                        <div class="text">Twitter</div>
                    </a>
                    <a href="https://www.instagram.com/lokesh_prajapat_m5_cs/" class="textButton" target="_blank" rel="noreferrer noopener">
                        <i class="fa-brands fa-instagram"></i>
                        <div class="text">Instagram</div>
                    </a>
                    <a href="https://www.facebook.com/profile.php?id=61575659804732" class="textButton" target="_blank"
                        rel="noreferrer noopener">
                        <i class="fa-brands fa-facebook"></i>
                        <div class="text">Facebook</div>
                    </a>
                    <a href="/terms" class="textButton" target="_blank" rel="noreferrer noopener">
                        <i class="fas fa-fw fa-file-contract"></i>
                        <div class="text">Terms</div>
                    </a>
                    <a href="/security" class="textButton" target="_blank" rel="noreferrer noopener">
                        <i class="fas fa-fw fa-shield-alt"></i>
                        <div class="text">Security</div>
                    </a>
                    <a href="/privacy" class="textButton" target="_blank" rel="noreferrer noopener">
                        <i class="fas fa-fw fa-lock"></i>
                        <div class="text">Privacy</div>
                    </a>
                </div>
                <div class="right">
                   
                    <button class="currentVersion textButton">
                        <i class="fas fa-fw fa-code-branch"></i>
                        <div class="text">v1.0.1</div>
                        <key id="newVersionIndicator" class="hidden">new</key>
                    </button>
                </div>
            </div>
        </footer>
         <div class="notification-popup">
    <div class="popup-header">
        <h3>Notification</h3>
        <button class="close-popup">&times;</button>
    </div>
    
    <div class="improvement-list">
            <div class="improvement">
                <div class="improvement-title">Gesture Recognition Engine
                    <span class="version-badge">v2.3.1</span>
                </div>
                <div class="improvement-details">
                    Improved hand tracking accuracy by 22% through better keypoint detection. Reduced false positives during rapid movements by implementing temporal smoothing.
                </div>
                <div class="improvement-date">July 12, 2025</div>
            </div>
            
            <div class="improvement">
                <div class="improvement-title">Input Latency Optimization</div>
                <div class="improvement-details">
                    Reduced end-to-end latency by 40ms (from 85ms to 45ms) by optimizing the render pipeline and implementing predictive motion modeling.
                </div>
                <div class="improvement-date">July 10, 2025</div>
            </div>
            
            <div class="improvement">
                <div class="improvement-title">Collision Detection System</div>
                <div class="improvement-details">
                    Fixed edge cases in self-collision detection that occurred during quick 180Â° turns. New algorithm uses continuous collision detection for more accurate results.
                </div>
                <div class="improvement-date">July 8, 2025</div>
            </div>
            
          
        </div>
</div>
<div class="popup-overlay"></div>
   <script src="{{ url_for('static', filename='js/theme-manager.js') }}"></script>
<script src="{{ url_for('static', filename='js/theme.js') }}"></script>
<script src="{{ url_for('static', filename='js/nav.js') }}"></script>

    <script>
        // Game history manager
        class SnakeGameHistory {
            constructor() {
                this.currentFilter = 'all';
                this.currentTimeFilter = 'all';
                this.searchQuery = '';
                this.historyData = [];
                this.filteredData = [];
                
                this.initElements();
                this.initEventListeners();
                this.loadHistory();
            }
            
            initElements() {
                this.historyTableBody = document.getElementById('snake-history-body');
                this.modeFilter = document.getElementById('snake-mode-filter');
                this.timeFilter = document.getElementById('snake-time-filter');
                this.searchInput = document.getElementById('snake-search-input');
                this.refreshBtn = document.getElementById('snake-refresh-btn');
                this.clearBtn = document.getElementById('snake-clear-btn');
                this.totalGamesElement = document.getElementById('snake-total-games');
                this.highestScoreElement = document.getElementById('snake-highest-score');
                this.averageScoreElement = document.getElementById('snake-average-score');
                this.winRateElement = document.getElementById('snake-win-rate');
            }
            
            initEventListeners() {
                this.modeFilter.addEventListener('change', () => {
                    this.currentFilter = this.modeFilter.value;
                    this.filterAndRenderHistory();
                });
                
                this.timeFilter.addEventListener('change', () => {
                    this.currentTimeFilter = this.timeFilter.value;
                    this.filterAndRenderHistory();
                });
                
                this.searchInput.addEventListener('input', () => {
                    this.searchQuery = this.searchInput.value.toLowerCase();
                    this.filterAndRenderHistory();
                });
                
                this.refreshBtn.addEventListener('click', () => {
                    this.loadHistory();
                });
                
                this.clearBtn.addEventListener('click', () => {
                    if (confirm('Are you sure you want to clear all game history? This cannot be undone.')) {
                        localStorage.removeItem('snakeGameHistory');
                        this.historyData = [];
                        this.filterAndRenderHistory();
                    }
                });
            }
            
            
// In the SnakeGameHistory class in history.html
// In the SnakeGameHistory class in history.html
loadHistory() {
    // Show loading state
    this.historyTableBody.innerHTML = `
        <tr class="snake-table-row">
            <td colspan="4" class="snake-loading">
                <i class="fas fa-spinner snake-loading-icon"></i><br>
                Loading game history...
            </td>
        </tr>
    `;
    
    // Get ALL history from localStorage (no limit)
    const history = localStorage.getItem('snakeGameHistory');
    this.historyData = history ? JSON.parse(history) : [];
    
    // Sort by date (newest first)
    this.historyData.sort((a, b) => new Date(b.date) - new Date(a.date));
    
    this.filterAndRenderHistory();
}



            generateMockData() {
                const modes = ['keyboard', 'gesture'];
                const mockData = [];
                const now = new Date();
                
                // Generate 50 mock entries
                for (let i = 0; i < 50; i++) {
                    const date = new Date();
                    date.setDate(now.getDate() - Math.floor(Math.random() * 30));
                    date.setHours(Math.floor(Math.random() * 24));
                    date.setMinutes(Math.floor(Math.random() * 60));
                    
                    mockData.push({
                        score: Math.floor(Math.random() * 500),
                        mode: modes[Math.floor(Math.random() * modes.length)],
                        date: date.toISOString()
                    });
                }
                
                // Store the mock data
                localStorage.setItem('snakeGameHistory', JSON.stringify(mockData));
                return mockData;
            }
            
            filterAndRenderHistory() {
                // Apply filters
                this.filteredData = this.historyData.filter(item => {
                    // Mode filter
                    if (this.currentFilter !== 'all' && item.mode !== this.currentFilter) {
                        return false;
                    }
                    
                    // Time filter
                    const now = new Date();
                    const itemDate = new Date(item.date);
                    
                    switch (this.currentTimeFilter) {
                        case 'today':
                            if (!this.isSameDay(itemDate, now)) return false;
                            break;
                        case 'week':
                            if (!this.isSameWeek(itemDate, now)) return false;
                            break;
                        case 'month':
                            if (!this.isSameMonth(itemDate, now)) return false;
                            break;
                    }
                    
                    // Search filter
                    if (this.searchQuery) {
                        const searchStr = `${item.score} ${item.mode} ${item.date}`.toLowerCase();
                        if (!searchStr.includes(this.searchQuery)) {
                            return false;
                        }
                    }
                    
                    return true;
                });
                
                this.renderHistoryTable();
                this.updateStats();
            }
            
            isSameDay(date1, date2) {
                return date1.getFullYear() === date2.getFullYear() &&
                       date1.getMonth() === date2.getMonth() &&
                       date1.getDate() === date2.getDate();
            }
            
            isSameWeek(date1, date2) {
                const oneDay = 24 * 60 * 60 * 1000;
                const diffDays = Math.round(Math.abs((date1 - date2) / oneDay));
                return diffDays < 7 && date1.getDay() <= date2.getDay();
            }
            
            isSameMonth(date1, date2) {
                return date1.getFullYear() === date2.getFullYear() &&
                       date1.getMonth() === date2.getMonth();
            }
            
            // In the renderHistoryTable method of SnakeGameHistory class
// In the renderHistoryTable method of SnakeGameHistory class
renderHistoryTable() {
    if (this.filteredData.length === 0) {
        this.historyTableBody.innerHTML = `
            <tr class="snake-table-row">
                <td colspan="4" class="snake-no-history">
                    <i class="fas fa-history snake-no-history-icon"></i><br>
                    No game history found
                </td>
            </tr>
        `;
        return;
    }
    
    this.historyTableBody.innerHTML = '';
    
    this.filteredData.forEach((item, index) => {
        const row = document.createElement('tr');
        row.className = 'snake-table-row';
        
        // Fix date formatting - handle both Date objects and strings
        let formattedDate;
        try {
            const dateObj = item.date instanceof Date ? item.date : new Date(item.date);
            formattedDate = dateObj.toLocaleString('en-US', {
                year: 'numeric',
                month: 'short',
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });
        } catch (e) {
            formattedDate = 'Unknown date';
        }
        
        // Determine score class
        const scoreClass = item.score > 300 ? 'snake-high-score' : item.score < 100 ? 'snake-low-score' : '';
        
        row.innerHTML = `
            <td class="snake-table-data">${index + 1}</td>
            <td class="snake-table-data snake-score-cell ${scoreClass}">${item.score}</td>
            <td class="snake-table-data snake-date-cell">${formattedDate}</td>
            <td class="snake-table-data">
                <i class="fas ${item.mode === 'gesture' ? 'fa-hand-paper snake-gesture-mode' : 'fa-keyboard snake-keyboard-mode'} snake-mode-icon"></i>
                ${item.mode === 'gesture' ? 'Gesture' : 'Keyboard'}
            </td>
        `;
        
        this.historyTableBody.appendChild(row);
    });
}
            updateStats() {
                if (this.filteredData.length === 0) {
                    this.totalGamesElement.textContent = '0';
                    this.highestScoreElement.textContent = '0';
                    this.averageScoreElement.textContent = '0';
                    this.winRateElement.textContent = '0%';
                    return;
                }
                
                // Total games
                this.totalGamesElement.textContent = this.filteredData.length;
                
                // Highest score
                const highestScore = Math.max(...this.filteredData.map(item => item.score));
                this.highestScoreElement.textContent = highestScore;
                
                // Average score
                const totalScore = this.filteredData.reduce((sum, item) => sum + item.score, 0);
                const averageScore = Math.round(totalScore / this.filteredData.length);
                this.averageScoreElement.textContent = averageScore;
                
                // Win rate (assuming score > 0 is a win)
                const wins = this.filteredData.filter(item => item.score > 0).length;
                const winRate = Math.round((wins / this.filteredData.length) * 100);
                this.winRateElement.textContent = `${winRate}%`;
            }
        }

        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', () => {
            const gameHistory = new SnakeGameHistory();
        });

        // Listen for history updates from other tabs
window.addEventListener('historyUpdated', (e) => {
    this.historyData = e.detail.history;
    this.filterAndRenderHistory();
});

// Also listen for storage changes
window.addEventListener('storage', (e) => {
    if (e.key === 'snakeGameHistory') {
        this.historyData = JSON.parse(e.newValue);
        this.filterAndRenderHistory();
    }
});
    </script>
</body>
</html>